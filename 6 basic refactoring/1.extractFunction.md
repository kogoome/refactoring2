# 6.1 함수 추출하기 Extract Function

- 반대 리팩터링 : 함수 인라인하기 (6.2)
- 1판에서의 이름 : 메서드 추출
```js
function printOwing(invoice) {
  printBanner();
  let outstanding = calculateOutstanding();

  // 세부 사항 출력
  console.log(`고객명: ${invoice.customer}`);
  console.log(`채무액: ${outstanding}`);
}
```
🔻
```js
function printOwing(invoice) {
  printBanner();
  let outstanding = calculateOutstanding()
  printDetails(outstanding);

  function printDetails(outstanding) {
    console.log(`고객명: ${invoice.customer}`);
    console.log(`채무액: ${outstanding}`);
  }
}
```

## 배경 <hr>
#### 코드를 언제 독립된 함수로 묶어야 하는가?
- 함수 하나가 한 화면을 넘기면 안된다는 길이의 기준
- 두번 이상 사용될 코드는 함수로 만드는 재사용의 기준
#### 경험상 함수 안 코드가 대여섯줄이 넘기시작하면 냄새를 풍긴다
#### 짧은 함수는 이름을 잘 지어야만 한다.
#### 성능최적화의 일반지침
1. 하지마라. 
2. 아직 하지마라

## 절차 <hr>
#### 1. 목적반영 이름 함수 작성
- '어떻게' 가 아닌 '무엇을' 하는지가
- 한줄이더라도 이름이 잘 나오면 함수추출
- 함수 내부에 중첩, 외부에서 필요하면 그때 외부로 '함수옮기기'

#### 2. 새 함수에 코드 복붙
   
#### 3. 참조 변수나 변수의 유효범위 확인, 문제시 매개변수로 전달
- 충첩함수에서는 문제 x
- 지역변수와 매개변수를 추출함수의 인수로 전달 사용
- 추출함수내 사용변수 선언이 외부에 있으면 내부선언으로 수정
- 뮤터블변수 주의
- 뮤터블이 하나라면 *질의함수 반환값으로 치환
- 뮤터블이 많으면 함수추출을 멈추고, '변수 쪼개기' 나 '임시변수 질의 함수로 바꾸기' 로 코드 단순화. 이후 함수 추출 재시도

##### *질의함수(query function) : 기존 정보를 변경시키지 않고 연산하여 새로운 정보를 리턴하는 함수, 사이드이팩트가 없어야 하고 동작수행코드가 제거되어야 함.

#### 4. 변수 처리가 끝나면 컴파일
- 컴파일시 처리하지 못한 변수를 찾는데 도움이됌

#### 5. 추출된 영역을 추출한 함수로 위임

#### 6. 테스트

#### 7. 추출한 함수와 같거나 유사한 코드가 또 있는지 살피고, 있다면 함수로 호출할지 검토(인라인 코드를 함수 호출로 바꾸기-6.5절)
- 중복 혹은 비슷한 코드를 찾아주는 리팩터링 도구도 있다. 이런 도구가 없다면 검색 기능을 이용하여 다른 곳에 중복된 코드가 없는지 확인해보는 것이 좋다.
